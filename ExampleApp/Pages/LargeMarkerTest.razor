@page "/LargeMarkerTest"

@using BlazorLeafletInterop.Components;
@using BlazorLeafletInterop.Components.Layers.Raster
@using BlazorLeafletInterop.Components.Layers.UI
@using BlazorLeafletInterop.Interops
@using BlazorLeafletInterop.Models.Basics;
@using BlazorLeafletInterop.Models.Options.Map

@inject IBundleInterop BundleInterop

<Map @ref="_map" Class="map" MapOptions="Options">
	<TileLayer UrlTemplate="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"/>
	@* Create a large amount of markers with random positions *@
	@for (var i = 0; i < 500; i++)
	{
		<Marker LatLng="@GetRandomLatLng()"/>
	}
</Map>

@code {
	private Map? _map;
	private MapOptions Options = new() {  Center = new LatLng(0, 0), Zoom = 1 };
	
	private LatLng GetRandomLatLng()
	{
		var random = new Random();
		var lat = random.NextDouble() * 180 - 90;
		var lng = random.NextDouble() * 360 - 180;
		return new LatLng(lat, lng);
	}
}